<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .list {
            width: 560px;
            height: 300px;
            margin: 50px auto;
            position: relative;
            overflow: hidden;
        }
        .list img {
            width: 560px;
            height: 300px;
            position: absolute;
            left: 560px;
        }
        .prev, 
        .next {
            position: absolute;
            top: 50%;
            width: 30px;
            height: 50px;
            margin-top: -25px;
            color: #fff;
            background-color: rgba(0, 0, 0, 0.6);
            font-size: 30px;
            text-align: center;
            line-height: 50px;
        }
        .prev {
            left: 0;
        }
        .next {
            right: 0;
        }
        .btns {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 30px;
            text-align: center;
        }
        .btns span {
            padding: 6px;
            margin: 0 6px;
            font-size: 0;
            background-color: #fff;
            border-radius: 50%;
        }
        .btns span.choose {
            background-color: #f00;
        }
    </style>
</head>
<body>
    <div class="list">
        <img src="img/0.jpg" alt="">
        <img src="img/1.jpg" alt="">
        <img src="img/2.jpg" alt="">
        <img src="img/3.jpg" alt="">
        <img src="img/4.jpg" alt="">
        <div class="btns">
            <span class="choose"></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="prev">&lt;</div>
        <div class="next">&gt;</div>
    </div>
<script src="./jquery.js"></script>
<script>
// 获取元素
var $img = $('.list img');
var $btns = $('.btns span')
// 当前显示的图片
var idx = 0;
// 循环定时器的句柄
var timebar;
// 设置默认状态
$img.eq(0).css('left', 0)
// 启动定时器
function startInterval() {
    timebar = setInterval(function() {
        // 前一张图片是处理idx之前的
        $img.eq(idx).animate({ left: -560 }, 500)
        // 显示下一张
        idx++;
        // 如果是最后一张图片，下一张就是第一张
        if (idx >= $img.length) {
            idx = 0;
        }
        // 当前的图片是idx之后的
        // 瞬间移动到右侧去，再移动到中间位置
        $img.eq(idx).css('left', 560).animate({ left: 0 }, 500)
        // 修改小圆点
        $btns
            .eq(idx).addClass('choose')
            // 其它的小圆点移除类
            .siblings().removeClass('choose');
    }, 3000)
}
// 启动定时器
startInterval();
// 处理按钮
// 下一张
$('.next').click(function() {
    // 清除定时器
    clearInterval(timebar);
    // 再处理idx之前，可以获取一张图片
    $img.eq(idx).stop(true).animate({ left: -560 }, 500)
    // 更改idx
    idx++;
    // 处理边界
    if (idx >= $img.length) {
        // 如果是最后一张图片，下一张就是第一张
        idx = 0;
    }
    // 修改样式, 前一张图片和当前图片
    $img.eq(idx).css('left', 560).stop(true).animate({ left: 0 }, 500)
    // 修改小圆点
    $btns.eq(idx).addClass('choose').siblings().removeClass('choose');
    // 启动定时器
    startInterval();
});
// 上一张
$('.prev').click(function() {
    // 清除定时器
    clearInterval(timebar);
    // 再处理idx之前，可以获取一张图片
    $img.eq(idx).stop(true).animate({ left: 560 }, 500)
    // 更改idx，并判断边界
    idx--;
    // 第一张图片的前一张是最后一张
    if (idx < 0) {
        idx = $img.length - 1;
    }
    // 处理样式, 处理前一张图片与当前图片
    $img.eq(idx).css('left', -560).stop(true).animate({ left: 0 }, 500)
    // 修改小圆点
    $btns.eq(idx).addClass('choose').siblings().removeClass('choose');
    // 启动定时器
    startInterval();
})
// 绑定事件
$btns.click(function() {
    // 获取小圆点顺序
    var index = $(this).index();
    // 如果点击的是已经选中的小圆点，不需要处理
    if (index === idx) {
        return;
    }
    // 清除定时器
    clearInterval(timebar);
    // 如果是右边的
    if (index > idx) {
        // 再处理idx之前，可以获取前一张图片
        $img.eq(idx).stop(true).animate({ left: -560 }, 500)
        // 把图片放在右侧，往左移动
        idx = index;
        // 修改idx之后的，对应当前图片
        $img.eq(idx).css('left', 560).stop(true).animate({ left: 0 }, 500)
    } else {
        // 再处理idx之前，可以获取前一张图片
        $img.eq(idx).stop(true).animate({left: 560}, 500)
        // 把图片放在左侧，向右移动
        idx = index;
        // 修改idx之后的，对应当前图片
        $img.eq(idx).css('left', -560).stop(true).animate({ left: 0 }, 500)
    }
    // 修改小圆点
    $btns.eq(idx).addClass('choose').siblings().removeClass('choose');
    // 启动定时器
    startInterval();
})
</script>
</body>
</html>